SELECT LEAST(n2.name, n1.name) as student_1, GREATEST(n2.name, n1.name) as student_2,n1.city
from student n2
JOIN student n1 ON n1.city = n2.city
and n1.name!=n2.name
GROUP by n1.name,n2.name,n1.city
order by n2.name limit (SELECT count(name) from student)/2;
